/**
 * Date: %STABLE_DATE%
 * Version: %VERSION%
 */
package rpg.item;

/**
 * Date: %STABLE_DATE%
 * Version: %VERSION%
 */
public class Refinable extends Equipable
{
	private static int MAX_REFINE_LEVEL = 20;
	private int refine;
	private int bonusValue;

	@Override
	public int getItemValue()
	{
		return super.getItemValue() + bonusValue;
	}

	/**
	 * Date: %STABLE_DATE%
	 * Version: %VERSION%
	 */
	private boolean refine()
	{
		if(refine < MAX_REFINE_LEVEL) {
			if ( Math.random() < 0.3 )
			{
				if ( refine + getLevel() < 9 )
				{
					bonusValue += getValue() * ( 1 + ( refine + getLevel() ) * 10 );
				} else
				{
					bonusValue += getValue() * ( 1 + ( refine + getLevel() ) * 10 )
					    * ( 1 + getRarity().value );
				}
				return true;
			} else
			{
				setDurability( 1 );
				return false;
			}
		}
		return false;
	}
}
